<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record id="sale_order_inherit_installed_services" model="ir.ui.view">
    <field name="name">sale.order.inherit.installed.services</field>
    <field name="model">sale.order</field>
    <field name="inherit_id" ref="sale_subscription.sale_subscription_order_view_form"/>
    <field name="arch" type="xml">

        <xpath expr="//notebook/page[@name='order_lines']/field/tree/field[@name='name']" position="before">
            <field name="analytic_account_id" attrs="{'invisible': [('is_subscription', '=', False)]}"/>
            <field name="contact_id" attrs="{'invisible': [('is_subscription', '=', False)]}"/>
            <field name="service_number" domain="[('partner_id', '=?', contact_id), ('stage', 'in', ['installed', 'active', 'discontinued'])]"/>
        </xpath>

        <xpath expr="//field[@name='partner_id']" position="after">
          <field name="contact_id" attrs="{'invisible': [('is_subscription', '=', False)]}"/>
        </xpath>

     
    </field>
  </record>
</odoo>
